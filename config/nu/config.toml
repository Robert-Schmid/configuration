# Nushell
# https://nushell.sh

# Paths
path = [
  '/home/robert/configuration/bin',
  '/home/robert/.local/bin',
]

# Options
skip_welcome_message = true

# Starship
# https://starship.rs
prompt = 'starship prompt'

# Startup
startup = [
 '''
  # TTY settings
  if $(= linux != $nu.env.TERM) {} {
    # Color scheme
    # https://draculatheme.com/tty
    #sh ~/repositories/github.com/dracula/tty/dracula-tty.sh

    # Fonts
    # /run/current-system/sw/share/consolefonts
    setfont Lat2-Terminus16
  }

  # Aliases
  alias @ = fork
  alias p = echo
  alias _ = rm -rf
  alias md = mkdir

  # NeoVim
  alias vim = nvim

  # NixOS
  # https://nixos.org
  alias nix-update = sudo nixos-rebuild switch
  alias nix-upgrade = sudo nixos-rebuild switch --upgrade --keep-going --fallback
  alias nix-gc = sudo nix-collect-garbage --delete-old

  # Sleep
  #alias z = sudo systemctl suspend
  #alias zz = swaymsg exit
  #alias zzz = sudo shutdown now

  # procs
  # https://github.com/dalance/procs
  alias ps = procs

  # htop
  # https://htop.dev
  alias top = htop

  # rm
  alias rm = rm -rf --trash
  alias rm! = rm -rf ~/.local/share/Trash

  # bat
  # https://github.com/sharkdp/bat
  alias cat = bat

  # fd
  # https://github.com/sharkdp/fd
  alias find = fd

  # ripgrep
  # https://github.com/BurntSushi/ripgrep
  alias grep = rg

  # curl
  # https://curl.haxx.se
  #alias curl = curl -sSL

  # Git
  # https://git-scm.com
  alias g = git

  # Change the working directory to the Git root:
  def @cd [] {
    cd $(git rev-parse --show-toplevel | str trim)
  }

  # gitui
  # https://github.com/extrawurst/gitui
  alias G = gitui

  # GitHub CLI
  # https://cli.github.com
  alias gist = gh gist create --web
  alias gv = gh repo view --web

  def gc [repository] {
    gh repo clone $repository `~/repositories/github.com/{{$repository}}`
  }

  # Broot
  # https://dystroy.org/broot/
  def br [...rest] {
    let path = $(broot --out /dev/stdout $rest | str trim)
    let is_empty = $(= $path | empty?)
    if $is_empty {} {
      cd $path
    }
  }
  alias . = br .

  # exa
  # https://the.exa.website
  alias l = exa --icons
  alias la = exa --icons --all
  alias ll = exa --icons --git --long
  alias lla = exa --icons --git --long --all
  alias T = exa --tree
  alias ta = exa --tree --all

  # Web browser
  alias b = fork google-chrome-stable
  '''
]

# Environment variables
[env]

# Applications
EDITOR = 'nvim'
BROWSER = 'google-chrome-stable'
